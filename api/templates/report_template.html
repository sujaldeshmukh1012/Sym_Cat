<!DOCTYPE html>
<html>
<head>
    <style>
        @page {
            size: a4 portrait;
            margin: 1.2cm;
            @frame footer {
                -pdf-frame-content: footerContent;
                bottom: 1cm;
                height: 1cm;
            }
        }
        body { font-family: 'Verdana', sans-serif; color: #222; line-height: 1.2; }
        .header { border-bottom: 3px solid #FFCD00; margin-bottom: 15px; padding-bottom: 8px; }
        .title { font-size: 18pt; font-weight: bold; color: #000; margin-top: 2px; }
        
        /* Information Grid */
        .summary-box { background-color: #f4f4f4; padding: 10px 15px; border: 1px solid #ddd; border-radius: 3px; margin-bottom: 15px; }
        .info-table { width: 100%; border-collapse: collapse; }
        .info-table td { padding: 2px 0; font-size: 8.5pt; }
        .label { font-weight: bold; color: #444; width: 110px; }

        /* Impact Alert Box */
        .impact-box { border-left: 3px solid #cc0000; background: #fff0f0; padding: 8px 12px; margin-bottom: 15px; font-size: 9pt; }
        .impact-title { color: #cc0000; font-weight: bold; text-transform: uppercase; font-size: 8pt; margin-bottom: 3px; }

        /* Findings Table */
        h3 { border-bottom: 1px solid #ddd; padding-bottom: 3px; font-size: 11pt; margin-top: 20px; text-transform: uppercase; color: #444; }
        .findings-table { width: 100%; border-collapse: collapse; }
        .findings-table th { background-color: #222; color: white; padding: 6px 10px; text-align: left; font-size: 8pt; }
        .findings-table td { padding: 8px 10px; border-bottom: 1px solid #eee; font-size: 8.5pt; vertical-align: top; }
        
        .badge { padding: 2px 0; border-radius: 2px; font-weight: bold; font-size: 7.5pt; text-align: center; display: block; width: 75px; text-transform: uppercase; }
        .severity-Critical { background-color: #cc0000; color: white; }
        .severity-Moderate { background-color: #FFCD00; color: black; }
        
        .footer { text-align: center; font-size: 7.5pt; color: #aaa; }
    </style>
</head>
<body>
    <div class="header">
        <div style="font-size: 8pt; color: #777; font-weight: bold;">AI-ENHANCED INSPECTION REPORT</div>
        <div class="title">{{ component_identified }} Analysis</div>
    </div>

    <div class="summary-box">
        <table class="info-table">
            <tr>
                <td class="label">Customer:</td><td>{{ customer_name }}</td>
                <td class="label">Serial Number:</td><td>{{ serial_number }}</td>
            </tr>
            <tr>
                <td class="label">Model:</td><td>{{ model }}</td>
            </tr>
            <tr>
                <td class="label">Inspector:</td><td>{{ inspector }}</td>
                <td class="label">Date:</td><td>{{ date }}</td>
            </tr>
            <tr>
                <td class="label">Inspection ID:</td><td>{{ inspection_id }}</td>
                <td class="label">Overall Status:</td><td><span class="badge severity-{{ overall_status }}">{{ overall_status }}</span></td>
            </tr>
        </table>
    </div>

    <div class="impact-box">
        <div class="impact-title">Operational Impact</div>
        {{ operational_impact }}
    </div>

    <h3>Detailed Anomalies</h3>
    <table class="findings-table">
        <thead>
            <tr>
                <th width="20%">Component</th>
                <th width="65%">Issue & Recommendation</th>
                <th width="15%">Severity</th>
            </tr>
        </thead>
        <tbody>
            {% for anomaly in anomalies %}
            <tr>
                <td><strong>{{ anomaly.component }}</strong></td>
                <td>
                    <div style="font-weight: bold; color: #cc0000; margin-bottom: 2px;">{{ anomaly.issue }}</div>
                    <div>{{ anomaly.description }}</div>
                    <div style="margin-top: 5px; font-size: 8pt; font-style: italic; color: #555;">
                        Action: {{ anomaly.recommended_action }}
                    </div>
                </td>
                <td><span class="badge severity-{{ anomaly.severity }}">{{ anomaly.severity }}</span></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div id="footerContent" class="footer">
        <hr style="border: 0; border-top: 1px solid #eee;" />
        Machine: {{ model }} ({{ serial_number }}) | Page <pdf:pagenumber>
    </div>
</body>
</html>